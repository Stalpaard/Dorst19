<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
   <f:view>
      <h:outputLabel value="Status: #{demoManagedBean.loginStatus()} "/>
      <h:form>
         <c:if test="#{demoManagedBean.isLoggedIn()}">
            <h:commandButton value="Logout" action="#{demoManagedBean.logoutUser()}"/>
            <h:commandButton value="Remove" action="#{demoManagedBean.removeUser()}"/>
         </c:if>
      </h:form>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputLabel value="Users in DB: #{demoManagedBean.queryUsers()} "/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputLabel value="Cafés in DB: #{demoManagedBean.queryAllCafes()} "/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
   </f:view>
<h:form>
   <h:inputText id="username" a:placeholder="username" value="#{demoManagedBean.username}"/>
   <h:inputText id="password" a:placeholder="password" value="#{demoManagedBean.password}"/>
   <h:selectOneMenu value="#{demoManagedBean.userType}">
      <f:selectItems value="#{demoManagedBean.userTypes}" />
   </h:selectOneMenu>
   <h:commandButton value="Login" action="#{demoManagedBean.loginUser()}"/>
   <h:commandButton value="Register" action="#{demoManagedBean.createUser()}"/>
   <h:outputText value="&lt;br/&gt;" escape="false"/>
   <h:outputText value="&lt;br/&gt;" escape="false"/>

   <c:if test="#{demoManagedBean.isLoggedIn() and demoManagedBean.isUserCustomer()}">
      <h:outputText value="Reservations: #{demoManagedBean.reservationsInfo}" escape="false"/>
      <h:outputText value="Credit: #{demoManagedBean.userCredit}" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="Reservation Menu" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:selectOneMenu id="select_cafe_cus" value ="#{demoManagedBean.reservationCafeId}">
         <f:selectItems id="select_cafe_map_cus" value="#{demoManagedBean.mapAllCafes()}" />
      </h:selectOneMenu>
      <h:commandButton value="Load café menu" action="#{demoManagedBean.onReservationBarChange()}"/>
      <h:selectOneMenu id="select_menu_cus" value ="#{demoManagedBean.reservationMenuEntryId}">
         <f:selectItems id="select_menu_map_cus" value="#{demoManagedBean.reservationMenu}" />
      </h:selectOneMenu>
      <c:if test="#{demoManagedBean.isReservationMenuLoaded()}">
         <h:inputText id="reservation_amount" a:placeholder="amount" value="#{demoManagedBean.reservationAmount}"/>
      </c:if>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="status: #{demoManagedBean.reservationStatus()}" escape="false"/>
      <c:if test="#{demoManagedBean.isReservationMenuLoaded()}">
         <h:commandButton value="Calculate reservation" action="#{demoManagedBean.prepareReservation()}"/>
      </c:if>
      <c:if test="#{demoManagedBean.readyToPay()}">
         <h:commandButton value="Pay reservation" action="#{demoManagedBean.payReservation()}"/>
      </c:if>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:selectOneMenu id="select_res_cus" value ="#{demoManagedBean.removeReservationId}">
         <f:selectItems id="select_res_map_cus" value="#{demoManagedBean.userReservations}" />
      </h:selectOneMenu>
      <h:commandButton value="Cancel reservation" action="#{demoManagedBean.removeReservation()}"/>

   </c:if>

   <c:if test="#{demoManagedBean.isLoggedIn() and demoManagedBean.isUserEmployee()}">
   </c:if>

   <c:if test="#{demoManagedBean.isLoggedIn() and demoManagedBean.isUserBoss() and not demoManagedBean.isCafeManaged()}">
      <h:inputText id="cafenaam" a:placeholder="cafenaam" value="#{demoManagedBean.cafeNaam}"/>
      <h:inputText id="cafestraat" a:placeholder="cafestraat" value="#{demoManagedBean.cafeStraat}"/>
      <h:inputText id="cafestad" a:placeholder="cafestad" value="#{demoManagedBean.cafeStad}"/>
      <h:inputText id="cafecapacitiet" a:placeholder="cafecapaciteit" value="#{demoManagedBean.cafeCapaciteit}"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:commandButton value="create cafe nuu" action="#{demoManagedBean.createCafe()}"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
         <h:outputText value="My cafés: " escape="false"/>
         <h:selectOneMenu id="select_cafe_boss" value ="#{demoManagedBean.managedCafeId}">
            <f:selectItems id="select_cafe_map_boss" value="#{demoManagedBean.mapOwnedCafes()}" />
         </h:selectOneMenu>
         <h:outputText value="&lt;br/&gt;" escape="false"/>
         <h:commandButton value="Manage cafe" action="#{demoManagedBean.manageCafe()}"/>
   </c:if>



   <c:if test="#{demoManagedBean.isCafeManaged()}">
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="#{demoManagedBean.managedCafeNaam()} menu overview: #{demoManagedBean.queryManagedDrinks()}"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:inputText id="drank_naam" a:placeholder="drank_naam" value="#{demoManagedBean.drank_name}"/>
      <h:inputText id="drank_alc_percentage" a:placeholder="drank_alc_percentage" value="#{demoManagedBean.drank_alc}"/>
      <h:inputText id="drank_volume" a:placeholder="drank_volume" value="#{demoManagedBean.drank_vol}"/>
      <h:inputText id="drank_prijs" a:placeholder="drank_prijs" value="#{demoManagedBean.price}"/>
      <h:inputText id="drank_stock" a:placeholder="drank_stock" value="#{demoManagedBean.stock}"/>
      <h:commandButton value="Voeg drankje toe" action="#{demoManagedBean.addDrinkToMenu()}"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="Menu: " escape="false"/>
      <h:selectOneMenu id="select_drink" value ="#{demoManagedBean.menuEntryId}">
         <f:ajax event="change" update="@this" />
         <f:selectItems value="#{demoManagedBean.mapManagedMenu()}" />
      </h:selectOneMenu>
      <h:commandButton value="Verwijder drankje" action="#{demoManagedBean.removeDrinkFromMenu()}"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>
      <h:outputText value="&lt;br/&gt;" escape="false"/>


      <h:commandButton value="unmanage cafe" action="#{demoManagedBean.unmanageCafe()}"/>
      <h:commandButton value="delete cafe" action="#{demoManagedBean.removeCafe()}"/>
   </c:if>

</h:form>
</html>
